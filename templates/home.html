{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>UDYAM 2016 | Home</title>
    <link href="{% static 'css/materialize.css' %}" rel="stylesheet">
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">
    <link href="{% static 'css/TimeCircles.css' %}" rel="stylesheet">
    <link href="{% static 'css/animate.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"/>
    <!-- Scroll Animation Initialize -->
    <style> [data-sr] { visibility: hidden; } </style>
    <style type="text/css">
        .subbtn{
            color : rgba(255,255,255,0.5);
            transition: color 0.7s;
            -webkit-transform: translateX(-25px);
    -moz-transform: translateX(-25px);
    -ms-transform: translateX(-25px);
    -o-transform: translateX(-25px);
    transform: translateX(-25px);
    -webkit-transition: -webkit-transform 0.3s 0.1s;
    -moz-transition: -moz-transform 0.3s 0.1s;
    transition: transform 0.3s 0.1s;
    cursor:pointer;
        }

        .subbtn:hover {
            color : #e87e04;
            transition: color 0.7s;
            -webkit-transform: translateX(0);
    -moz-transform: translateX(0);
    -ms-transform: translateX(0);
    -o-transform: translateX(0);
    transform: translateX(0);
    -webkit-transition: -webkit-transform 0.3s 0.1s;
    -moz-transition: -moz-transform 0.3s 0.1s;
    transition: transform 0.3s 0.1s;


        }

        .sidemenu{
            list-style-type: none;
        }
        .sidemenu i {
            width: 20%;
        }
        .sidemenu li {
            padding: 10px;
            display:block;
        }
        .bottommenu li {
            display: inline-block;
            text-align: center;
            width: 150px;
        }
        </style>
</head>

<body>
    <div id="particles-js" class="green-wine"></div>
    <div class="green-mint"> </div>
    <!-- Landing Section -->
    <section id="sec-1" class="no-padding">
        {% if msg %}
            <div style="background-color:#fff8e1" id="error_msg">
                {% if error %}
                    <p style="color: limegreen; float: left">You have been successfully registered with us.</p>
                {% else %}
                    <p style="color: red; float: left">This team name has already been taken.</p>
                {% endif %}
                <p type="button" aria-hidden="true"
                            style="text-align: right;" onclick="hide_menu('error_msg')"> <i class="fa fa-times-close fa-2x"></i></p>
            </div>
        {% endif %}
        <div id="DateCountdown" data-date="2016-02-12 00:00:00" style="width: 40%;z-index:1;margin:0 auto" class="wow flipInX" data-wow-delay="1.5s"></div>
        <div id="menu_list" style="z-index:1;margin-top:0vh;position:absolute; margin-left:0;float:left;width:20%;text-align:right" class="wow fadeInLeft" data-wow-delay="1s" data-wow-duration = "1s">
            <ul class = "sidemenu">
                <li class="wow bounceInUp" data-wow-delay="1.6s">
                    <a href="#about">
                    <div class = "subbtn">
                    About&nbsp;
                    <i class = "fa fa-globe fa-2x"></i>
                    </div>
                    </a>
                </li>
                <li class="wow bounceInUp" data-wow-delay="1.3s">
                    <a href="{% url 'p_static' 'drishti' %}">
                    <div class = "subbtn">
                    Drishti&nbsp;
                    <i class = "fa fa-eye fa-2x wow fadeInUp"></i>
                    </div></a>
                </li>
                <li class="wow bounceInUp" data-wow-delay="1s">
                    <a href="{% url 'p_static' 'events' %}">
                    <div class = "subbtn">
                    Events&nbsp;
                    <i class = "fa fa-cogs fa-2x wow fadeInUp"></i>
                    </div></a>
                </li>
                <li class="wow bounceInUp" data-wow-delay=".7s">
                    <a href="{% url 'p_static' 'sponsors' %}">
                    <div class = "subbtn">
                    Sponsors&nbsp;
                    <i class = "fa fa-flag-checkered fa-2x"></i>
                    </div>
                    </a>
                </li>
                <li class="wow bounceInUp" data-wow-delay=".4s">
                    <a href="{% url 'p_static' 'workshop' %}">
                    <div class = "subbtn">
                    Workshops&nbsp;
                    <i class = "fa fa-wrench fa-2x wow fadeInUp"></i>
                    </div></a>
                </li>
                <li class="wow bounceInUp" data-wow-delay=".1s">
                    <a href="{% url 'p_static' 'team' %}">
                    <div class = "subbtn">
                    Our Team&nbsp;
                    <i class = "fa fa-group fa-2x"></i>
                    </div></a>
                </li>
            </ul>
        </div>
        <div class="container center">
            <div class="pushdown-2p"></div>
            <div class="row">
                <div class="col s12">
                    <img class="image-title" src="{% static 'img/udyam.png' %}">
                </div>
            </div> <br>
            <div class="container">
                <div class="col s6 center white-text">
                    <h5 class="white-text roboto-300 no-margin">
                      Techno-Management fest, <br> Department of Electronics Engineering, IIT(BHU). <br><br>
                    </h5>
                    <p class="no-margin"><b>12th - 14th Feb</b></p>
                </div>
            </div> <br>
            <div class="container">
                <div class="row">
                    <div class="col s12">
                        <a class="btn-flat green-moss border-green white-text waves-effect waves-green modal-trigger"
                             style="width: 50%; height: 50px; line-height: 50px;" href="#register_modal">
                                REGISTER
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Mountain Like overlay (above the particlejs background) -->
        <img class="overlay-ground" src="{% static 'img/ground-green.png' %}">
        <div class="modal" id="register_modal">
            <div class="row">
                <div class="col m11">
                    <h3 id = "form_heading" style="text-align: center;">Team Registration</h3>
                </div>
                <div class="col m1">
                    <p type="button" class="modal-close" data-dismiss="modal" aria-hidden="true"
                            style="text-align: right;"> <i class="fa fa-times-circle fa-2x"></i></p>
                </div>
            </div>
            <div class="modal-content">
                <form class="form-horizontal" method="post" id="register_form" >
                    {% csrf_token %}

                    <div class="row">
                        <div class="col s12 m6 ">
                            <div class="row">
                                <div class="col m2 s12">
                                    <label for="event_name">Event:</label>
                                </div>
                                <div class="col m10 s12">
                                    <select id="event_name" class="browser-default">
                                        <option value="" disabled selected>Choose your event</option>
                                        <option value="code42day" >CODE-4-2DAY</option>
                                        <option value="codedef" >CODEDEF</option>
                                        <option value="continnum" >CONTINNUM</option>
                                        <option value="commnet" >COMMNET</option>
                                        <option value="digisim" >DIGISIM</option>
                                        <option value="embedtron" >EMBEDTRON</option>
                                        <option value="funckit" >FUNCKIT</option>
                                        <option value="ichip" >I-CHIP</option>
                                        <option value="ignite" >IGNITE</option>
                                        <option value="krypto" >KRYPTO</option>
                                        <option value="mosaic" >MOSIAC</option>
                                        <option value="muse" >MUSE</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col s12 m4 offset-m1">
                            <label for="team_name">Team Name:</label>
                            <input type="text" name="team_name" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <fieldset id="tr_field">
                            <legend>Team Representative:</legend>
                            Name: <input type="text" name="member1_name" required>&emsp;&emsp;
                            Contact Number: <input type="text" name="member1_contact" pattern="^[1-9][0-9]{9}$" required>&emsp;&emsp;
                            Email: <input type="email" name="member1_email" required>&emsp;&emsp;
                            <a class="btn btn1 fa fa-plus fa-2x" onclick="add_member()">
                                <!-- If changed the tag of button... do change it in remove member functon-->
                            </a>
                        </fieldset>
                    </div>
                    <div class="form-group" id="members_div">
                    </div>
                </form>
              </div>
              <div class="modal-footer">
                  <button class="btn" type="submit" form="register_form">Register</button>
              </div>
        </div>
    </section>
    <!-- Start of Below the Fold -->
    <section id="sec-2" class="green-mint white-text">
        <div class="container">
            <div class="row">
                <div class="center">
                    <img src="{% static 'img/t-satellite-hero.png' %}" style="width: 10%;">
                    <h5 class="roboto-300" id="about">
<b>UDYAM</b> is the annual techno-management fest of Electronics Engineering Department, IIT BHU, Varanasi. Synonymous with technical know-how and management acumen, Udyam is about practical application of classroom knowledge. With this idea of application oriented approach UDYAM started.
                    </h5>
                </div>
            </div>
            <div class="row center">
                <iframe width="400" height="250" src="http://www.youtube.com/embed/2KCbDWBREI4"> </iframe>
            </div>
            <div class="row">
                <p style="font-size: 1.5em" class="roboto-300">
It’s not just these neck-to-neck competitions that you can get at UDYAM. It’s also about the whacky novel contraptions created here that go far beyond the fest. Internships. Patents. All happens. UDYAM sets the stage free for you. Spotlight is on you. Just go with it. We promise after the three days of fest, you will leave with lot of passion to innovate and excel.
                    </p>
            </div>

        </div>

    </section>
    <div id="ground-inlets">
    <img class="overlay-ground-invert" src="{% static 'img/ground-green.png' %}">
    </div>
    <section id="sec-4">
        <footer class="page-footer green-wine">
            <div class="footer-copyright">
                <div class="container center">
                    <a class="grey-text text-darken-4 center" href="{% url 'home' %}">
                        <i class="fa fa-copyright">UDYAM-2016</i>
                    </a>
                    <a target="_blank" href="https://www.facebook.com/udyamfest" style="color:rgba(255,255,255,0.6);margin-left: -50px; margin-top: 7px; float: left">
				        <i class= "fa fa-2x fa-facebook-f"></i>
                    </a>
                </div>
            </div>
        </footer>
    </section>


  {{ block.super }}
    <script type="text/javascript" src="{% static 'js/jquery-2.1.4.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/materialize.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/particles.js' %}"></script>
    <script src='{% static "js/scrollReveal.min.js" %}'></script>
    <script src="{% static 'js/laurenz.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/TimeCircles.js'%}"></script>
    <script type="text/javascript" src="{% static 'js/wow.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/register.js' %}"></script>

  <script>
    new WOW().init();
      // Global variables
      </script>
  <script type="text/javascript">
  $(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
    $('.modal-trigger').leanModal();
    $('#register_form').on('submit',function(e){
        e.preventDefault();
        $('#register_modal').hide();
      var registrationData = {
        event: $('#event_name option:selected').val(),
        team_name: $('input[name=team_name]').val(),
        main_contact: {
            name: $('input[name=member1_name]').val(),
            contact: $('input[name=member1_contact]').val(),
            email: $('input[name=member1_email]').val()
        },
        team_details: []
      };
      var i = 1;
      while(i<=5) {
        registrationData.team_details.push({
          name: $('input[name=member'+i+'_name]').val(),
          contact: $('input[name=member'+i+'_contact]').val(),
          email: $('input[name=member'+i+'_email]').val()
        });
        i++;
      }
      $.ajax({
        type: 'POST',
        url: '/',
        data: JSON.stringify(registrationData),
        dataType: 'json'
      });
        return false;
    });

  });
    $("#DateCountdown").TimeCircles({
        "animation": "smooth",
        "bg_width": 1,
        "fg_width": 0.1,
        "circle_bg_color": "#143C15",
        "time": {
        "Days": {
            "text": "Days",
            "color": "#79A685",
            "show": true
        },
        "Hours": {
            "text": "Hours",
            "color": "#79A685",
            "show": true
        },
        "Minutes": {
            "text": "Minutes",
            "color": "#79A685",
            "show": true
        },
        "Seconds": {
            "text": "Seconds",
            "color": "#79A685",
            "show": true
        }
        }
        });
      /**
 * Created by darknight on 15/1/16.
 */
var max_members = 5;
      var counter = 1;
      // TODO change as per event
      var events = {"" : 5,
                    "code42day" :"5",
                    "codedef" :"1",
                    "continnum" :"5",
                    "commnet" :"5",
                    "digisim" :"5",
                    "embedtron" :"5",
                    "funckit" :"5",
                    "ichip" :"5",
                    "ignite" :"5",
                    "krypto" :"5",
                    "mosaic" :"5",
                    "muse" :"5"
                    };

      $("#event_name").on("change", function(){
          max_members = parseInt(events[$('#event_name option:selected').val()]);
          if( $("#m" + (max_members+1) + "_field").length > 0){
              var i = max_members + 1;
              while(i <= 5){
                  $("#m"+(i)+"_field").remove();
                  i++;
              }
              counter = max_members;
          }
      });
    function add_member(){
        //dynamically adds a member to the team
        if(counter >= max_members){
            alert("Maximum "+max_members+" is/are allowed in "+$('#event_name option:selected').text()+" event");
        }
        else{
            counter++;
            var text =  '<fieldset id="m'+counter+'_field"> \
                            <legend style="text-align: center;">Member '+counter+' details:</legend>\
                            Name: <input type="text" name="member'+counter+'_name" required>&emsp;&emsp;\
                            Contact Number: <input type="text" name="member'+counter+'_contact" pattern="^[1-9][0-9]{9}$" required>&emsp;&emsp; \
                            Email: <input type="email" name="member'+counter+'_email" required>&emsp;&emsp;\
                            <a class="btn btn2 fa fa-remove fa-2x" \
                                onclick="remove_member(' + "'m"+counter+"_field'"+')"> \
                            </a>\
                        </fieldset>';
            $("#members_div").append(text);
        }
    }
    function remove_member(tag){
        $('#'+tag).remove();
        $mem_div = $("#members_div");
        $mem_div.children("fieldset").each(function(index) {
            var mem_id = index + 2;
            $(this).attr("id", "m" +mem_id+"_field");
            $child = $(this).children('input');
            $child.eq(0).attr("name", "member"+mem_id+"_name");
            $child.eq(1).attr("name", "member"+mem_id+"_contact");
            $child.eq(2).attr("name", "member"+mem_id+"_email");
            $(this).children("a").eq(0).attr("onclick","remove_member('m"+mem_id+"_field')");
            $(this).children("legend").eq(0).html("Member "+ mem_id + " details")
        });
        counter--;
    }

    function hide_menu(id){
        $('#'+id).attr("class", "hide");
    }
  </script>
</body>
</html>
